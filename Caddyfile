# Caddyfile for CSS Visual Learner
# For deployment with src/ directory structure

{
    # Redirect old visualizer URLs to new locations with 301 (permanent redirect)
    redir /animations.html /visualizers/animations.html 301
    redir /color.html /visualizers/color.html 301
    redir /css-box.html /visualizers/css-box.html 301
    redir /flex-box.html /visualizers/flex-box.html 301
    redir /flex-justify-content.html /visualizers/flex-justify-content.html 301
    redir /grid.html /visualizers/grid.html 301
    redir /grid-extended.html /visualizers/grid-extended.html 301
    redir /nth-child.html /visualizers/nth-child.html 301
    redir /selector-playground.html /visualizers/selector-playground.html 301
    redir /z-index.html /visualizers/z-index.html 301

    # Serve static files from src directory
    file_server {
        root src
    }

    # Add compression for better performance
    encode gzip

    # Add security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
    }

    # Cache control headers for different file types
    @css {
        path *.css
    }
    header @css {
        Cache-Control "public, max-age=3600, must-revalidate"
    }

    @js {
        path *.js
    }
    header @js {
        Cache-Control "public, max-age=3600, must-revalidate"
    }

    @html {
        path *.html
    }
    header @html {
        Cache-Control "public, max-age=300, must-revalidate"
    }
}